"""
PRISM Phase 3.0 - VLM 프롬프트 (타입별 분리)
각 차트 타입에 최적화된 프롬프트
"""


class ChartPrompts:
    """차트 타입별 VLM 프롬프트"""
    
    @staticmethod
    def get_prompt_for_type(element_type: str) -> str:
        """
        Element 타입에 맞는 프롬프트 반환
        
        Args:
            element_type: 'pie_chart', 'bar_chart', 'table', 'map', 'header'
            
        Returns:
            프롬프트 문자열
        """
        prompts = {
            'pie_chart': ChartPrompts._pie_chart_prompt(),
            'bar_chart': ChartPrompts._bar_chart_prompt(),
            'table': ChartPrompts._table_prompt(),
            'map': ChartPrompts._map_prompt(),
            'header': ChartPrompts._header_prompt()
        }
        
        return prompts.get(element_type, ChartPrompts._default_prompt())
    
    @staticmethod
    def _pie_chart_prompt() -> str:
        """원그래프 전용 프롬프트"""
        return """
당신은 문서 분석 전문가입니다. 이 원그래프(파이 차트)를 분석하여 자연어로 설명하세요.

**분석 항목:**
1. 차트 제목 (있다면)
2. 각 항목(세그먼트)의 이름과 비율
3. 가장 큰 항목과 가장 작은 항목
4. 데이터의 전체적인 분포 특징

**출력 형식:**
자연어로 상세히 설명하세요. 예시:

"이 원그래프는 [주제]를 나타냅니다. 
응답자 중 [항목1]이 [비율1]%로 가장 높은 비율을 차지하며, 
그 다음으로 [항목2]가 [비율2]%, [항목3]이 [비율3]%를 차지합니다.
가장 낮은 비율은 [항목N]으로 [비율N]%입니다."

**주의사항:**
- 모든 항목과 비율을 정확히 추출하세요
- 비율의 합이 100%가 되는지 확인하세요
- 차트에 표시된 라벨을 정확히 읽어주세요
- 한글 텍스트는 UTF-8로 정확히 인코딩하세요
"""
    
    @staticmethod
    def _bar_chart_prompt() -> str:
        """막대그래프 전용 프롬프트"""
        return """
당신은 문서 분석 전문가입니다. 이 막대그래프를 분석하여 자연어로 설명하세요.

**분석 항목:**
1. 차트 제목 및 축 레이블 (X축, Y축)
2. 각 막대의 항목명과 값
3. 최대값과 최소값
4. 데이터의 트렌드 또는 패턴

**출력 형식:**
자연어로 상세히 설명하세요. 예시:

"이 막대그래프는 [주제]를 보여줍니다.
[항목1]이 [값1]로 가장 높은 수치를 기록했으며,
그 다음으로 [항목2]가 [값2], [항목3]이 [값3]를 나타냅니다.
가장 낮은 수치는 [항목N]으로 [값N]입니다.
전반적으로 [트렌드 설명]하는 경향을 보입니다."

**주의사항:**
- 모든 막대의 값을 정확히 읽어주세요
- 단위가 있다면 반드시 포함하세요 (%, 원, 명 등)
- 축 라벨을 정확히 읽어주세요
- 막대의 순서를 유지하세요
- 한글 텍스트는 UTF-8로 정확히 인코딩하세요
"""
    
    @staticmethod
    def _table_prompt() -> str:
        """표 전용 프롬프트"""
        return """
당신은 문서 분석 전문가입니다. 이 표를 분석하여 자연어로 설명하세요.

**분석 항목:**
1. 표 제목 및 설명
2. 열(Column) 헤더
3. 행(Row) 데이터
4. 주요 수치 및 패턴

**출력 형식:**
자연어로 상세히 설명하세요. 예시:

"이 표는 [주제]에 대한 정보를 정리한 것입니다.
표는 [열1], [열2], [열3] 등의 열로 구성되어 있습니다.

주요 데이터는 다음과 같습니다:
- [행1]: [열1 값], [열2 값], [열3 값]
- [행2]: [열1 값], [열2 값], [열3 값]
...

특히 주목할 점은 [특징적인 데이터]입니다."

**주의사항:**
- 표의 모든 헤더를 정확히 읽어주세요
- 중요한 행의 데이터를 빠짐없이 포함하세요
- 수치 데이터의 단위를 명시하세요
- 표가 크다면 주요 항목만 선택적으로 설명하세요
- 한글 텍스트는 UTF-8로 정확히 인코딩하세요
"""
    
    @staticmethod
    def _map_prompt() -> str:
        """지도 전용 프롬프트"""
        return """
당신은 문서 분석 전문가입니다. 이 지도를 분석하여 데이터를 추출하세요.

**분석 항목:**
1. 지도 제목 및 주제
2. 각 지역의 이름과 표시된 데이터 (수치, 색상 등)
3. 범례(Legend) 정보
4. 지역 간 비교 및 특징

**출력 형식:**
자연어로 상세히 설명하세요. 예시:

"이 지도는 [주제]를 지역별로 나타낸 것입니다.

지역별 분포는 다음과 같습니다:
- 수도권: 52.5%
- 충청권: 10.3%
- 전라권: 7.8%
- 경남권: 14.9%
- 경북권: 9.8%
- 강원/제주: 4.7%

수도권이 전체의 절반 이상을 차지하며 가장 높은 비율을 보입니다."

**주의사항:**
- 지도에 표시된 모든 지역명을 정확히 읽어주세요
- 각 지역의 수치 또는 색상 코드를 정확히 추출하세요
- 범례가 있다면 반드시 해석하세요
- 한글 지역명은 UTF-8로 정확히 인코딩하세요
"""
    
    @staticmethod
    def _header_prompt() -> str:
        """헤더 전용 프롬프트"""
        return """
당신은 문서 분석 전문가입니다. 이 헤더 영역의 텍스트를 추출하세요.

**분석 항목:**
1. 섹션 번호 (있다면)
2. 섹션 제목
3. 부제목 또는 설명

**출력 형식:**
추출된 텍스트를 그대로 반환하세요. 예시:

"06. 응답자 특성"

또는

"전체 응답자
☉ 해외 스포츠 리그 시청 여부 및 시청 리그"

**주의사항:**
- 텍스트를 정확히 추출하세요
- 특수문자(☉, ⊙ 등)도 그대로 포함하세요
- 줄바꿈을 유지하세요
- 한글 텍스트는 UTF-8로 정확히 인코딩하세요
"""
    
    @staticmethod
    def _default_prompt() -> str:
        """기본 프롬프트 (타입 불명확한 경우)"""
        return """
당신은 문서 분석 전문가입니다. 이 이미지를 분석하여 내용을 설명하세요.

**분석 항목:**
1. 이미지의 주요 내용
2. 텍스트가 있다면 추출
3. 데이터나 수치가 있다면 정리

**출력 형식:**
자연어로 상세히 설명하세요.

**주의사항:**
- 이미지의 모든 중요한 정보를 포함하세요
- 한글 텍스트는 UTF-8로 정확히 인코딩하세요
"""